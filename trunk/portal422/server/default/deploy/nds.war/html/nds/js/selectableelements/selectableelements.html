<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
<title>Selectable Elements (WebFX)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="local/webfxlayout.js"></script>
</head>
<body>
<!-- WebFX Layout Include -->
<script type="text/javascript">

var articleMenu= new WebFXMenu;
articleMenu.left  = 384;
articleMenu.top   = 86;
articleMenu.width = 140;
articleMenu.add(new WebFXMenuItem("Introduction", "selectableelements.html"));
articleMenu.add(new WebFXMenuItem("Usage", "usage.html"));
articleMenu.add(new WebFXMenuItem("Sub Classes", "subclasses.html"));
articleMenu.add(new WebFXMenuItem("API", "api.html"));
articleMenu.add(new WebFXMenuItem("Demo", "demo.html"));
articleMenu.add(new WebFXMenuSeparator);
articleMenu.add(new WebFXMenuItem("Download", "http://webfx.eae.net/download/selectableelements102.zip"));
webfxMenuBar.add(new WebFXMenuButton("Article Menu", null, null, articleMenu));

webfxLayout.writeTitle("Selectable Elements");
webfxLayout.writeMenu();
webfxLayout.writeDesignedByEdger();

</script>
<div class="webfx-main-body">
<!-- end WebFX Layout Includes -->

<p>
<span class="date">2002-09-19</span>: First public version released.
</p>

<h2>Introduction</h2>

<p>This is script that allows you to select HTML elements using the mouse. It
can be used to allow the user to select items in a list, rows in a table or
anything else you seem fit.</p>

<p>The goal for this script was to make it very generic so that it could easily
be modified to support different types of elements and element structures. Another goal was to support
any browser supporting DOM1 HTML (and basic DOM2 Events support). But even if the browser does not support
the W3C DOM the data should still be available to the user.</p>

<p>To get a better feeling for how the script behaves take a look at the
<a href="demo.html">demo</a>.</p>

<h2>Implementation</h2>

<p>In its simplest case the behavior allows selection of child elements of an
HTML element. Once the child is selected the <code>className</code> property
is updated to include <code>selected</code>. This is done using two very useful
functions called <code>addClassName</code> and <code>removeClassName</code>.</p>

<p>The implementation of the complete script is fairly easy. It listens to mouse clicks
and when the user clicks on an element it is selected. The only thing making it
a bit more interesting (and more complicated) is the support for multiple
selection by holding down the ctrl or shift key.</p>

<p>We add an event listener for the <code>click</code> event in the constructor
and once clicked we handle that in a method of the object.</p>

<pre>
function SelectableElements(oElement, bMultiple) {
   if (oElement == null)
      return;

   this._htmlElement = oElement;
   this._multiple = Boolean(bMultiple);

   this._selectedItems = [];
   this._fireChange = true;

   var oThis = this;
   var f = function (e) {
      if (e == null) e = oElement.ownerDocument.parentWindow.event;
      oThis.click(e);
   };

   if (oElement.addEventListener)
      oElement.addEventListener("click", f, false);
   else if (oElement.attachEvent)
      oElement.attachEvent("onclick", f);
}
</pre>

<p>Notice how we encapsulate the <code>this</code> object and use a local
function object in the event listeners. Also notice how we test whether the
DOM2 Events method <code>addEventListener</code> is supported and if not
fall back on the IE proprietary equivalent method.</p>

<p>We are not going to list the <code>click</code> method here but
feel free to look at the
<a href="view-source:http://webfx.eae.net/dhtml/selectableelements/js/selectableelements.js">source code</a>.</p>



<h3>Traversable Interface</h3>

<p>To be able to support multiple selection we must know how to go from current
selected element to the next or previous item. We also needs to be able to tell
whether an item comes before another item. There are three methods, <code>getNext</code>,
<code>getPrevious</code> and <code>isBefore</code> that does these things.</p>

<h3>Indexable Interface</h3>

<p>Another very useful addition is the ability to index items. This isn't
required to support selection or multiple selection but it can be useful and in
some cases it might be easier to first implement the indexable interface and then
use it to implement the traversal interface.</p>

<p>The indexable interface contains four methods; <code>getItems</code>,
<code>getItem</code>, <code>getSelectedIndexes</code> and <code>getItemIndex</code>.</p>

<p>
<a href="selectableelements.html">Introduction</a><br />
<a href="usage.html">Usage</a><br />
<a href="subclasses.html">Sub Classes</a><br />
<a href="api.html">API</a><br />
<a href="demo.html">Demo</a><br />
<a href="http://webfx.eae.net/download/selectableelements102.zip">Download</a>
</p>

<p class="author">Author: Erik Arvidsson</p>

<!-- end webfx-main-body -->
</div>

</body>
</html>

